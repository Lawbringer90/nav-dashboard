å¯¼èˆªä»ªè¡¨ç›˜ NavDashboard å®Œæ•´éƒ¨ç½²æ•™ç¨‹

æ‰“é€ å±äºä½ çš„ä¸ªäººå¯¼èˆªç«™,æ”¯æŒ Cloudflare å’Œ Docker ä¸¤ç§éƒ¨ç½²æ–¹å¼,è¿˜æœ‰æµè§ˆå™¨æ’ä»¶å¿«é€Ÿæ·»åŠ æ”¶è—


ğŸ“Œ é¡¹ç›®ç®€ä»‹

NavDashboard æ˜¯ä¸€ä¸ªç®€æ´ç¾è§‚çš„ä¸ªäººå¯¼èˆªä»ªè¡¨ç›˜,æ”¯æŒåˆ†ç±»ç®¡ç†ã€å›¾æ ‡è‡ªåŠ¨è·å–ã€æ•°æ®å¯¼å…¥å¯¼å‡ºç­‰åŠŸèƒ½ã€‚

é¡¹ç›®ç‰¹ç‚¹

ğŸ¨ æ¯›ç»ç’ƒ UI è®¾è®¡,é¢œå€¼åœ¨çº¿
ğŸ“ æ”¯æŒå¤šåˆ†ç±»ç®¡ç†
ğŸ” ç«™ç‚¹æœç´¢åŠŸèƒ½
ğŸ“¤ Chrome æµè§ˆå™¨æ’ä»¶,å³é”®å¿«é€Ÿæ·»åŠ 
ğŸ”’ å¯†ç ä¿æŠ¤åå°
ğŸ’¾ æ•°æ®å¯¼å…¥å¯¼å‡ºå¤‡ä»½

é¡¹ç›®åœ°å€ https://github.com/debbide/nav-dashboard


â˜ï¸ æ–¹å¼ä¸€ Cloudflare éƒ¨ç½²

ä½¿ç”¨ GitHub Actions è‡ªåŠ¨éƒ¨ç½²åˆ° Cloudflare Pages,å®Œå…¨å…è´¹,å…¨çƒ CDN åŠ é€Ÿã€‚

å‰ç½®å‡†å¤‡

1 æ³¨å†Œ Cloudflare è´¦å· https://dash.cloudflare.com
2 æ³¨å†Œ GitHub è´¦å·
3 Fork æœ¬é¡¹ç›®åˆ°ä½ çš„ GitHub

ç¬¬ä¸€æ­¥ åˆ›å»º Cloudflare èµ„æº

ç™»å½• Cloudflare Dashboard,åˆ›å»ºä»¥ä¸‹èµ„æº

åˆ›å»º D1 æ•°æ®åº“
è¿›å…¥ Workers and Pages ç„¶åç‚¹å‡» D1
ç‚¹å‡» Create database
è¾“å…¥åç§° nav-dashboard-db
è®°å½•ä¸‹ Database ID åé¢è¦ç”¨

åˆ›å»º KV å‘½åç©ºé—´
è¿›å…¥ Workers and Pages ç„¶åç‚¹å‡» KV
ç‚¹å‡» Create a namespace
è¾“å…¥åç§° nav-dashboard-kv
è®°å½•ä¸‹ Namespace ID åé¢è¦ç”¨

ç¬¬äºŒæ­¥ è·å– API Token

è®¿é—® https://dash.cloudflare.com/profile/api-tokens
ç‚¹å‡» Create Token
é€‰æ‹© Edit Cloudflare Workers æ¨¡æ¿
ç¡®è®¤æƒé™åŒ…å«
  Account Workers Scripts Edit
  Account Cloudflare Pages Edit
  Account D1 Edit
  Account Workers KV Storage Edit
ç‚¹å‡» Create Token
ç«‹å³å¤åˆ¶ Token åªæ˜¾ç¤ºä¸€æ¬¡

ç¬¬ä¸‰æ­¥ é…ç½® GitHub Secrets

è¿›å…¥ä½  Fork çš„ä»“åº“
ç‚¹å‡» Settings ç„¶å Secrets and variables ç„¶å Actions
æ·»åŠ ä»¥ä¸‹ 4 ä¸ª Secrets

CLOUDFLARE_API_TOKEN
å¡«å…¥åˆšæ‰å¤åˆ¶çš„ API Token

CLOUDFLARE_ACCOUNT_ID
åœ¨ Cloudflare Dashboard å³ä¾§æ‰¾åˆ° Account ID å¤åˆ¶å¡«å…¥

D1_DATABASE_ID
å¡«å…¥ç¬¬ä¸€æ­¥åˆ›å»ºçš„æ•°æ®åº“ ID

KV_NAMESPACE_ID
å¡«å…¥ç¬¬ä¸€æ­¥åˆ›å»ºçš„ KV å‘½åç©ºé—´ ID

ç¬¬å››æ­¥ è¿è¡Œéƒ¨ç½²

è¿›å…¥ä»“åº“çš„ Actions é¡µé¢
ç‚¹å‡»å·¦ä¾§ Deploy to Cloudflare
ç‚¹å‡» Run workflow
é€‰æ‹© main åˆ†æ”¯è¿è¡Œ
ç­‰å¾…éƒ¨ç½²å®Œæˆ å¤§çº¦ 2 åˆ†é’Ÿ

ç¬¬äº”æ­¥ é…ç½® Pages ç»‘å®š

é‡è¦ é¦–æ¬¡éƒ¨ç½²åéœ€è¦æ‰‹åŠ¨é…ç½®ä¸€æ¬¡ç»‘å®š

è¿›å…¥ Cloudflare Dashboard
ç‚¹å‡» Pages æ‰¾åˆ° nav-dashboard é¡¹ç›®
è¿›å…¥ Settings ç„¶å Functions
æ·»åŠ  D1 ç»‘å®š
  Variable name å¡« DB
  é€‰æ‹© nav-dashboard-db æ•°æ®åº“
æ·»åŠ  KV ç»‘å®š
  Variable name å¡« KV
  é€‰æ‹©åˆšæ‰åˆ›å»ºçš„ KV å‘½åç©ºé—´
ç‚¹å‡» Save

å®Œæˆåè®¿é—®

ä¸»é¡µ https://nav-dashboard.pages.dev
åå° https://nav-dashboard.pages.dev/admin.html
é»˜è®¤å¯†ç  admin123


ğŸ³ æ–¹å¼äºŒ Docker éƒ¨ç½²

é€‚åˆæœ‰è‡ªå·±æœåŠ¡å™¨çš„ç”¨æˆ·,ä¸€é”®éƒ¨ç½²,æ•°æ®æœ¬åœ°å­˜å‚¨ã€‚

docker-compose.yml é…ç½®

services:
  nav-dashboard:
    image: ghcr.io/debbide/simple-nav-dashboard:latest
    container_name: nav-dashboard
    restart: unless-stopped
    ports:
      - "3000:3000"
    volumes:
      - ./data:/app/data
      - ./uploads:/app/uploads
    environment:
      - ADMIN_PASSWORD=admin123
      - TZ=Asia/Shanghai

éƒ¨ç½²æ­¥éª¤

1 åˆ›å»ºç›®å½•
mkdir nav-dashboard
cd nav-dashboard

2 åˆ›å»º docker-compose.yml æ–‡ä»¶
å¤åˆ¶ä¸Šé¢çš„é…ç½®å†…å®¹ä¿å­˜

3 å¯åŠ¨å®¹å™¨
docker-compose up -d

4 è®¿é—®ç«™ç‚¹
ä¸»é¡µ http://ä½ çš„IP:3000
åå° http://ä½ çš„IP:3000/admin.html

é…ç½®è¯´æ˜

3000:3000 å·¦è¾¹æ˜¯ä¸»æœºç«¯å£å¯ä»¥æ”¹æˆå…¶ä»–å¦‚ 8080:3000
ADMIN_PASSWORD ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„å¯†ç 
data ç›®å½•å­˜å‚¨ SQLite æ•°æ®åº“
uploads ç›®å½•å­˜å‚¨ä¸Šä¼ çš„å›¾æ ‡

æ›´æ–°å‡çº§

docker-compose pull
docker-compose up -d


ğŸ§© æµè§ˆå™¨æ’ä»¶ä½¿ç”¨

æ”¯æŒåœ¨ä»»æ„ç½‘é¡µå³é”®å¿«é€Ÿæ·»åŠ åˆ°å¯¼èˆªä»ªè¡¨ç›˜,å‘Šåˆ«æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ã€‚

æ’ä»¶åŠŸèƒ½

âœ¨ å³é”®èœå•å¿«é€Ÿæ·»åŠ å½“å‰ç½‘é¡µ
ğŸ“Œ ç‚¹å‡»å›¾æ ‡æ·»åŠ å½“å‰é¡µé¢
ğŸ”„ è‡ªåŠ¨è·å–ç½‘é¡µæ ‡é¢˜å’Œå›¾æ ‡
ğŸ“ æ”¯æŒé€‰æ‹©åˆ†ç±»
ğŸ” æ”¯æŒå¯†ç éªŒè¯
ğŸŒ åŒæ—¶æ”¯æŒ CF ç‰ˆå’Œ Docker ç‰ˆ

å®‰è£…æ­¥éª¤

1 ä¸‹è½½æ’ä»¶
ä»ä»“åº“ä¸‹è½½ chrome-extension æ–‡ä»¶å¤¹åˆ°æœ¬åœ°

2 æ‰“å¼€æ‰©å±•ç®¡ç†é¡µé¢
Chrome æµè§ˆå™¨è®¿é—® chrome://extensions/
Edge æµè§ˆå™¨è®¿é—® edge://extensions/

3 å¼€å¯å¼€å‘è€…æ¨¡å¼
æ‰“å¼€é¡µé¢å³ä¸Šè§’çš„å¼€å‘è€…æ¨¡å¼å¼€å…³

4 åŠ è½½æ’ä»¶
ç‚¹å‡» åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº
é€‰æ‹© chrome-extension æ–‡ä»¶å¤¹
æ’ä»¶å®‰è£…å®Œæˆ

é…ç½®æ’ä»¶

1 ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ çš„æ’ä»¶å›¾æ ‡
2 ç‚¹å‡»è®¾ç½®æŒ‰é’®
3 è¾“å…¥ä½ çš„å¯¼èˆªç«™åœ°å€
   CF ç‰ˆå¡« https://nav-dashboard.pages.dev
   Docker ç‰ˆå¡« http://ä½ çš„IP:3000
4 å¦‚æœè®¾ç½®äº†å¯†ç ä¿æŠ¤,å¡«å…¥å¯†ç 
5 ç‚¹å‡»ä¿å­˜è®¾ç½®
6 ç‚¹å‡»æµ‹è¯•è¿æ¥ç¡®è®¤é…ç½®æ­£ç¡®

ä½¿ç”¨æ–¹æ³•

æ–¹æ³•ä¸€ å³é”®èœå•
åœ¨ä»»æ„ç½‘é¡µç©ºç™½å¤„å³é”®
ç‚¹å‡» æ·»åŠ åˆ°å¯¼èˆªä»ªè¡¨ç›˜
ç¡®è®¤ä¿¡æ¯é€‰æ‹©åˆ†ç±»åç‚¹å‡»æ·»åŠ 

æ–¹æ³•äºŒ ç‚¹å‡»å›¾æ ‡
ç›´æ¥ç‚¹å‡»å·¥å…·æ çš„æ’ä»¶å›¾æ ‡
è‡ªåŠ¨å¡«å……å½“å‰é¡µé¢ä¿¡æ¯
é€‰æ‹©åˆ†ç±»åç‚¹å‡»æ·»åŠ 


â“ å¸¸è§é—®é¢˜

Q CF ç‰ˆè®¿é—®æ˜¾ç¤º Not Found
A æ£€æŸ¥æ˜¯å¦å®Œæˆäº† Pages ç»‘å®šé…ç½®

Q Docker ç‰ˆæ— æ³•è®¿é—®
A æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦å¼€æ”¾äº†å¯¹åº”ç«¯å£

Q æ’ä»¶æç¤ºç½‘ç»œé”™è¯¯
A æ£€æŸ¥ API åœ°å€æ˜¯å¦æ­£ç¡®,ç¡®è®¤å¯¼èˆªç«™æ­£åœ¨è¿è¡Œ

Q å¿˜è®°åå°å¯†ç 
A CF ç‰ˆéœ€è¦é‡æ–°éƒ¨ç½²,Docker ç‰ˆä¿®æ”¹ç¯å¢ƒå˜é‡åé‡å¯å®¹å™¨


ğŸ‰ ç»“è¯­

åˆ°è¿™é‡Œä½ å°±æ‹¥æœ‰äº†ä¸€ä¸ªå±äºè‡ªå·±çš„å¯¼èˆªä»ªè¡¨ç›˜

CF ç‰ˆé€‚åˆè¿½æ±‚å…è´¹å’Œå…¨çƒè®¿é—®é€Ÿåº¦çš„ç”¨æˆ·
Docker ç‰ˆé€‚åˆæœ‰æœåŠ¡å™¨æƒ³è¦å®Œå…¨æŒæ§æ•°æ®çš„ç”¨æˆ·
æµè§ˆå™¨æ’ä»¶è®©æ”¶è—ç½‘ç«™å˜å¾—è¶…çº§æ–¹ä¾¿

å¦‚æœè§‰å¾—é¡¹ç›®ä¸é”™,æ¬¢è¿ç»™ä¸ª Star æ”¯æŒä¸€ä¸‹

é¡¹ç›®åœ°å€ https://github.com/debbide/nav-dashboard
